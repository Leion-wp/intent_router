{
    "name": "intent-router",
    "displayName": "Intent Router",
    "description": "Centralized intent routing for VS Code / Cursor / Agentic extensions",
    "version": "0.0.1",
    "license": "MIT",
    "repository": {
        "type": "git",
        "url": "https://github.com/Leion-wp/intent_router.git"
    },
    "engines": {
        "vscode": "^1.75.0"
    },
    "main": "./out/extension.js",
    "activationEvents": [
        "onCommand:intentRouter.route",
        "onCommand:intentRouter.registerCapabilities",
        "onCommand:intentRouter.routeFromJson",
        "onCommand:intentRouter.createPipeline",
        "onCommand:intentRouter.runPipeline",
        "onCommand:intentRouter.dryRunPipeline",
        "onCommand:intentRouter.pipelines.new",
        "onCommand:intentRouter.pipelines.run",
        "onCommand:intentRouter.pipelines.dryRun",
        "onCommand:intentRouter.pipelines.openJson",
        "onCommand:intentRouter.pipelines.refresh",
        "onCommand:intentRouter.pipelines.openBuilder",
        "onView:intentRouterPipelines"
    ],
    "contributes": {
        "commands": [
            {
                "command": "intentRouter.route",
                "title": "Intent Router: Route Intent"
            },
            {
                "command": "intentRouter.routeFromJson",
                "title": "Intent Router: Route Intent (JSON)"
            },
            {
                "command": "intentRouter.createPipeline",
                "title": "Intent Router: Create Pipeline"
            },
            {
                "command": "intentRouter.runPipeline",
                "title": "Intent Router: Run Pipeline"
            },
            {
                "command": "intentRouter.dryRunPipeline",
                "title": "Intent Router: Dry Run Pipeline"
            },
            {
                "command": "intentRouter.pipelines.new",
                "title": "Intent Router: New Pipeline"
            },
            {
                "command": "intentRouter.pipelines.run",
                "title": "Intent Router: Run Selected Pipeline"
            },
            {
                "command": "intentRouter.pipelines.dryRun",
                "title": "Intent Router: Dry Run Selected Pipeline"
            },
            {
                "command": "intentRouter.pipelines.openJson",
                "title": "Intent Router: Open Pipeline JSON"
            },
            {
                "command": "intentRouter.pipelines.refresh",
                "title": "Intent Router: Refresh Pipelines"
            }
        ],
        "viewsContainers": {
            "activitybar": [
                {
                    "id": "intentRouter",
                    "title": "Intent Router",
                    "icon": "media/intent-router.svg"
                }
            ]
        },
        "views": {
            "intentRouter": [
                {
                    "id": "intentRouterPipelines",
                    "name": "Intent Pipelines"
                }
            ]
        },
        "menus": {
            "view/title": [
                {
                    "command": "intentRouter.pipelines.new",
                    "when": "view == intentRouterPipelines",
                    "group": "navigation"
                },
                {
                    "command": "intentRouter.pipelines.run",
                    "when": "view == intentRouterPipelines",
                    "group": "navigation"
                },
                {
                    "command": "intentRouter.pipelines.dryRun",
                    "when": "view == intentRouterPipelines",
                    "group": "navigation"
                },
                {
                    "command": "intentRouter.pipelines.openJson",
                    "when": "view == intentRouterPipelines",
                    "group": "navigation"
                },
                {
                    "command": "intentRouter.pipelines.refresh",
                    "when": "view == intentRouterPipelines",
                    "group": "navigation"
                }
            ],
            "view/item/context": [
                {
                    "command": "intentRouter.pipelines.run",
                    "when": "view == intentRouterPipelines && viewItem == pipelineItem",
                    "group": "inline"
                },
                {
                    "command": "intentRouter.pipelines.dryRun",
                    "when": "view == intentRouterPipelines && viewItem == pipelineItem",
                    "group": "inline"
                },
                {
                    "command": "intentRouter.pipelines.openJson",
                    "when": "view == intentRouterPipelines && viewItem == pipelineItem",
                    "group": "inline"
                }
            ]
        },
        "configuration": {
            "title": "Intent Router",
            "properties": {
                "intentRouter.mappings": {
                    "type": "array",
                    "default": [],
                    "description": "User-defined capability mappings that override registered providers.",
                    "items": {
                        "type": "object",
                        "required": [
                            "capability",
                            "command"
                        ],
                        "properties": {
                            "capability": {
                                "type": "string",
                                "description": "Normalized capability identifier (ex: git.push)."
                            },
                            "command": {
                                "type": "string",
                                "description": "VS Code command to execute for this capability."
                            },
                            "provider": {
                                "type": "string",
                                "description": "Optional provider name to scope this mapping."
                            },
                            "target": {
                                "type": "string",
                                "description": "Optional target name to scope this mapping."
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "vscode",
                                    "external"
                                ],
                                "description": "Provider type. External is reserved for future use."
                            }
                        }
                    }
                },
                "intentRouter.debug": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable verbose Intent Router logs in the console."
                },
                "intentRouter.logLevel": {
                    "type": "string",
                    "enum": [
                        "error",
                        "warn",
                        "info",
                        "debug"
                    ],
                    "default": "info",
                    "description": "Minimum log level for the Intent Router output channel."
                },
                "intentRouter.activeProfile": {
                    "type": "string",
                    "default": "",
                    "description": "Active profile name used for profile-specific mappings and provider settings."
                },
                "intentRouter.profiles": {
                    "type": "array",
                    "default": [],
                    "description": "Named profiles that can override mappings and provider enablement.",
                    "items": {
                        "type": "object",
                        "required": [
                            "name"
                        ],
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Profile name."
                            },
                            "mappings": {
                                "type": "array",
                                "default": [],
                                "description": "Profile-specific mappings that override global mappings.",
                                "items": {
                                    "type": "object",
                                    "required": [
                                        "capability",
                                        "command"
                                    ],
                                    "properties": {
                                        "capability": {
                                            "type": "string",
                                            "description": "Normalized capability identifier (ex: git.push)."
                                        },
                                        "command": {
                                            "type": "string",
                                            "description": "VS Code command to execute for this capability."
                                        },
                                        "provider": {
                                            "type": "string",
                                            "description": "Optional provider name to scope this mapping."
                                        },
                                        "target": {
                                            "type": "string",
                                            "description": "Optional target name to scope this mapping."
                                        },
                                        "type": {
                                            "type": "string",
                                            "enum": [
                                                "vscode",
                                                "external"
                                            ],
                                            "description": "Provider type. External is reserved for future use."
                                        }
                                    }
                                }
                            },
                            "enabledProviders": {
                                "type": "array",
                                "default": [],
                                "items": {
                                    "type": "string"
                                },
                                "description": "If set, only these providers are allowed."
                            },
                            "disabledProviders": {
                                "type": "array",
                                "default": [],
                                "items": {
                                    "type": "string"
                                },
                                "description": "Providers to block."
                            }
                        }
                    }
                },
                "intentRouter.demoProvider": {
                    "type": "string",
                    "enum": [
                        "",
                        "git"
                    ],
                    "default": "",
                    "description": "Enable a built-in demo provider (git) for quick testing."
                }
            }
        }
    },
    "scripts": {
        "vscode:prepublish": "npm run compile",
        "compile": "tsc -p ./",
        "watch": "tsc -watch -p ./",
        "test": "npm run compile && node ./out/test/runTest.js"
    },
    "devDependencies": {
        "@types/mocha": "^10.0.10",
        "@types/node": "16.x",
        "@types/vscode": "^1.75.0",
        "@vscode/test-electron": "^2.5.2",
        "glob": "^13.0.0",
        "mocha": "^11.7.5",
        "typescript": "^4.9.0"
    }
}
